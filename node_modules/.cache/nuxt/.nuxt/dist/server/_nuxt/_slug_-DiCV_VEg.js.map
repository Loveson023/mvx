{"version":3,"file":"_slug_-DiCV_VEg.js","sources":["../../../../../../../app/pages/purposes/[slug].vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { getAllListings } from '@/services/listingsService'\r\nimport Divider from '~/components/templates/divider.vue'\r\nimport { createSlug } from '~/utils/slugify'\r\n// import Breadcrumbs from '~/components/templates/breadcrumbs.vue'\r\nimport { MapPin, BedDouble, Bath, LandPlot, PhoneCall, Wallet, Building2 } from 'lucide-vue-next'\r\n\r\nconst route = useRoute()\r\nconst slug = route.params.slug\r\nconst properties = ref([])\r\nconst loading = ref(true)\r\n\r\nonMounted(async () => {\r\n  const listings = await getAllListings()\r\n\r\n  console.log('Fetched listings:', listings) // ðŸ‘ˆ Check whatâ€™s coming in\r\n\r\n  // âœ… Filter properties by purpose slug\r\n  properties.value = listings.filter((p) => {\r\n    const purposeSlug = p.purpose?.toLowerCase().replace(/\\s+/g, '-')\r\n    return purposeSlug === slug\r\n  })\r\n\r\n  loading.value = false\r\n})\r\n</script>\r\n\r\n<template>\r\n  <section class=\"pt-20 pb-16 text-white max-w-7xl mx-auto px-6 lg:px-12\">\r\n    <Divider />\r\n    <h1 class=\"text-3xl md:text-4xl font-light uppercase mb-10\">\r\n      Properties for {{ slug.replace('-', ' ') }} in Dubai\r\n    </h1>\r\n\r\n    <div v-if=\"loading\" class=\"text-center text-gray-400 py-20\">\r\n      Loading properties...\r\n    </div>\r\n\r\n    <div v-else-if=\"properties.length\" class=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n      <!-- <div\r\n        v-for=\"property in properties\"\r\n        :key=\"property.id\"\r\n        class=\"bg-neutral-900 rounded-xl overflow-hidden hover:shadow-xl transition-all\"\r\n      >\r\n        <img\r\n          :src=\"property.photos?.[0]?.thumbnail_path || '/placeholder.jpg'\"\r\n          :alt=\"property.title\"\r\n          class=\"h-64 w-full object-cover\"\r\n        />\r\n        <div class=\"p-5\">\r\n          <h2 class=\"text-lg font-semibold\">{{ property.title }}</h2>\r\n          <p class=\"text-sm text-gray-400\">\r\n            {{ property.location?.full_path_json?.[2]?.value || 'Dubai' }}\r\n          </p>\r\n          <p class=\"text-sm mt-2 text-mavrix font-semibold\">\r\n            AED {{ property.price?.toLocaleString() }}\r\n          </p>\r\n        </div>\r\n      </div> -->\r\n      <div v-for=\"property in properties\" :key=\"property.id\"\r\n          class=\"bg-[#212121] rounded-2xl property_card shadow-md hover:shadow-xl transition overflow-hidden group\">\r\n          <NuxtLink :to=\"`/${createSlug(property)}`\">\r\n            <!-- <img\r\n              :src=\"property.photos?.[0]?.full_path || 'https://placehold.co/600x400'\"\r\n              alt=\"Property\"\r\n              class=\"w-full h-56 object-cover group-hover:scale-105 transition-transform duration-300\"\r\n            /> -->\r\n            <div class=\"relative\">\r\n              <img :src=\"property.photos?.[0]?.full_path || '/images/properties/mavrix.jpg'\" alt=\"Property\"\r\n                class=\"h-40 w-full object-cover transform group-hover:scale-105 transition-transform duration-500 cursor-pointer\" />\r\n              <span class=\"absolute top-3 right-3 property-badge text-white text-xs px-3 py-1 rounded-full\">\r\n                {{ property.purpose }}\r\n              </span>\r\n            </div>\r\n          </NuxtLink>\r\n          <div class=\"p-5 flex flex-col flex-1\">\r\n            <h2 class=\"text-lg font-light text-gray-200 line-clamp-2\">\r\n              {{ property.title }}\r\n            </h2>\r\n\r\n            <div class=\"flex gap-2 items-center py-4\">\r\n              <MapPin color=\"#c99171\" class=\"h-8 w-8\" :stroke-width=\"1\" />\r\n              <p class=\"text-gray-400 text-sm\">{{ property.location?.full_path }}</p>\r\n            </div>\r\n\r\n            <div class=\"flex gap-2 border-t border-b py-3 my-2 justify-between\">\r\n              <div class=\"flex gap-2 px-2 align-middle items-center\">\r\n                <Wallet class=\"h-6 w-6\" :stroke-width=\"1\" />\r\n                <p class=\"text-md font-light text-mavrix\">\r\n                  AED {{ property.price?.toLocaleString() }}\r\n                </p>\r\n              </div>\r\n              <div class=\"flex gap-2 px-2 align-middle items-center\">\r\n                <Building2 class=\"h-6 w-6\" :stroke-width=\"1\" />\r\n                <p class=\"text-xs text-gray-400\">{{ property.category || 'N/A' }}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"flex gap-2 py-3\">\r\n              <div class=\"flex gap-2 px-2 items-center border-r border-r-gray-600\">\r\n                <BedDouble class=\"h-8 w-8\" :stroke-width=\"1\" />\r\n                <p class=\"text-xs text-gray-400\">{{ property.bed?.name || 'N/A' }}</p>\r\n              </div>\r\n              <div class=\"flex gap-2 px-2 items-center border-r border-r-gray-600\">\r\n                <Bath class=\"h-8 w-8\" :stroke-width=\"1\" />\r\n                <p class=\"text-xs text-gray-400\">{{ property.bath?.name || 'N/A' }}</p>\r\n              </div>\r\n              <div class=\"flex gap-2 px-2 items-center\">\r\n                <LandPlot class=\"h-8 w-8\" :stroke-width=\"1\" />\r\n                <p class=\"text-xs text-gray-400\">{{ property.built_size }} Sq.Ft.</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"flex justify-between gap-4 items-center mt-4\">\r\n              <NuxtLink :to=\"`/${createSlug(property)}`\"\r\n                class=\"button-mavrix w-full text-center font-light uppercase text-sm\">\r\n                View Details â†’\r\n              </NuxtLink>\r\n              <a :href=\"`tel:${property.user?.mobile}`\" class=\"button-mavrix-outline\">\r\n                <PhoneCall color=\"#c99171\" class=\"h-4 w-4\" :stroke-width=\"1\" />\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div\r\n      v-else\r\n      class=\"text-center mt-16 bg-neutral-900 rounded-2xl py-10 border border-neutral-800\"\r\n    >\r\n      <h2 class=\"text-2xl font-light text-gray-300\">\r\n        No properties found for this purpose.\r\n      </h2>\r\n    </div>\r\n        <Divider />\r\n\r\n  </section>\r\n</template>\r\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrInterpolate","_unref","_ssrRenderList","_push","_parent","_ssrRenderAttr","_createVNode","_toDisplayString"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AASA,UAAM,QAAQ,SAAA;AACd,UAAM,OAAO,MAAM,OAAO;AAC1B,UAAM,aAAa,IAAI,EAAE;AACzB,UAAM,UAAU,IAAI,IAAI;;;AAkBb,YAAA,WAAAA,eAAAC,WAAA,EAAA,OAAM,4DAAwD,MAAA,CAAA,CAAA,GAAA;;AAGjD,YAAA,+EAAAC,eAAAC,MAAA,IAAA,EAAK,QAAO,KAAA,GAAA,CAAA,CAAA,iBAAA;UAGrB,QAAA,OAAO;;MAIF,WAAA,WAAA,MAAW,QAAM;;AAqBPC,sBAAA,WAAA,QAAZ,aAAQ;;;YAEL,IAAE,IAAMD,MAAA,UAAA,EAAW,QAAQ,CAAA;AAAA,UAAA;6BAAtC,CAaW,GAAAE,QAAAC,UAAA,aAAA;;+DANDC,cAAA,OAAK,SAAS,aAAa,aAAS,+BAAA,0PAGrCL,eAAA,SAAS,OAAO;;;kBAJvBM,YAMM,OAAA,EAND,OAAM,cAAU;AAAA,oBACnBA,YACsH,OAAA;AAAA,sBADhH,KAAK,SAAS,aAAa,aAAS;AAAA,sBAAqC,KAAI;AAAA,sBACjF,OAAM;AAAA,oBAAA;oBACRA,YAEO,UAFD,OAAM,kFAAA,GAAiFC,gBACxF,SAAS,OAAO,GAAA,CAAA;AAAA,kBAAA;;;;;;AAMlB,gBAAA,mGAAAP,eAAA,SAAS,KAAK,CAAA,iDAAA;;YAIT,OAAM;AAAA,YAAU,OAAM;AAAA,YAAW,gBAAc;AAAA,UAAA;mEACnB,SAAS,UAAU,SAAS,CAAA,uIAAA;;YAKtD,OAAM;AAAA,YAAW,gBAAc;AAAA,UAAA;iFAE9B,SAAS,OAAO,eAAA,CAAc,CAAA,mEAAA;;YAI5B,OAAM;AAAA,YAAW,gBAAc;AAAA,UAAA;AACN,gBAAA,oCAAAA,eAAA,SAAS,YAAQ,KAAA,CAAA,oHAAA;;YAM1C,OAAM;AAAA,YAAW,gBAAc;AAAA,UAAA;mEACN,SAAS,KAAK,QAAI,KAAA,CAAA,iFAAA;;YAGhD,OAAM;AAAA,YAAW,gBAAc;AAAA,UAAA;mEACD,SAAS,MAAM,QAAI,KAAA,CAAA,sDAAA;;YAG7C,OAAM;AAAA,YAAW,gBAAc;AAAA,UAAA;AACL,gBAAA,oCAAAA,eAAA,SAAS,UAAU,CAAA,mFAAA;;YAK9C,IAAE,IAAMC,MAAA,UAAA,EAAW,QAAQ,CAAA;AAAA,YACpC,OAAM;AAAA,UAAA;6BADR,CAGW,GAAAE,QAAAC,UAAA,aAAA;;;;;kCAF6D,kBAExE;AAAA,gBAAA;AAAA;;;;AACI,gBAAA,KAAAC,cAAA,QAAI,OAAS,SAAS,MAAM,MAAM,EAAA,CAAA,iCAAA;;YACzB,OAAM;AAAA,YAAU,OAAM;AAAA,YAAW,gBAAc;AAAA,UAAA;;;;;;;;;;;;;;;;;;"}