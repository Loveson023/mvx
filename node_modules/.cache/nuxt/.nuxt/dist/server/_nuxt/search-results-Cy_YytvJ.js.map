{"version":3,"file":"search-results-Cy_YytvJ.js","sources":["../../../../../../../app/pages/search-results.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted, watch } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { getAllListings } from '@/services/listingsService'\r\n\r\nconst route = useRoute()\r\nconst listings = ref([])\r\nconst filteredListings = ref([])\r\nconst loading = ref(true)\r\n\r\nasync function loadResults() {\r\n  loading.value = true\r\n  const query = route.query\r\n\r\n  // Fetch all listings\r\n  const allListings = await getAllListings()\r\n\r\n  listings.value = allListings\r\n\r\n  // Apply filters from query\r\n  filteredListings.value = allListings.filter((item) => {\r\n    const matchesCategory = !query.category || item.category === query.category\r\n    const matchesPurpose = !query.purpose || item.purpose === query.purpose\r\n    const matchesLocation =\r\n      !query.location || item.location?.full_path_json?.[2]?.value === query.location\r\n    const matchesBedrooms = !query.bedrooms || item.bed?.name === query.bedrooms\r\n    const matchesPrice =\r\n      (!query.minPrice || item.price >= Number(query.minPrice)) &&\r\n      (!query.maxPrice || item.price <= Number(query.maxPrice))\r\n\r\n    return matchesCategory && matchesPurpose && matchesLocation && matchesBedrooms && matchesPrice\r\n  })\r\n\r\n  loading.value = false\r\n}\r\n\r\nonMounted(loadResults)\r\nwatch(() => route.query, loadResults)\r\n</script>\r\n<template>\r\n  <section class=\"container mx-auto px-4 py-8\">\r\n    <h1 class=\"text-3xl font-bold mb-6 text-white\">Search Results</h1>\r\n\r\n    <div v-if=\"loading\" class=\"text-center text-white\">Loading...</div>\r\n\r\n    <div v-else>\r\n      <div v-if=\"filteredListings.length === 0\" class=\"text-center text-white\">\r\n        No results found.\r\n      </div>\r\n\r\n      <div v-else class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        <div\r\n          v-for=\"listing in filteredListings\"\r\n          :key=\"listing.id\"\r\n          class=\"bg-white rounded-lg shadow-md overflow-hidden\"\r\n        >\r\n          <img\r\n            :src=\"listing.images?.[0]?.url || 'https://via.placeholder.com/400x300?text=No+Image'\"\r\n            :alt=\"listing.title\"\r\n            class=\"w-full h-48 object-cover\"\r\n          />\r\n          <div class=\"p-4\">\r\n            <h2 class=\"text-xl font-semibold mb-2\">{{ listing.title }}</h2>\r\n            <p class=\"text-gray-600 mb-4\">{{ listing.location?.full_path || 'Unknown Location' }}</p>\r\n            <p class=\"text-lg font-bold text-blue-600\">${{ listing.price.toLocaleString() }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrRenderAttr","_ssrInterpolate"],"mappings":";;;;;;;;;AAKA,UAAM,QAAQ,SAAA;AACd,UAAM,WAAW,IAAI,EAAE;AACvB,UAAM,mBAAmB,IAAI,EAAE;AAC/B,UAAM,UAAU,IAAI,IAAI;AAExB,mBAAe,cAAc;AAC3B,cAAQ,QAAQ;AAChB,YAAM,QAAQ,MAAM;AAGpB,YAAM,cAAc,MAAM,eAAA;AAE1B,eAAS,QAAQ;AAGjB,uBAAiB,QAAQ,YAAY,OAAO,CAAC,SAAS;AACpD,cAAM,kBAAkB,CAAC,MAAM,YAAY,KAAK,aAAa,MAAM;AACnE,cAAM,iBAAiB,CAAC,MAAM,WAAW,KAAK,YAAY,MAAM;AAChE,cAAM,kBACJ,CAAC,MAAM,YAAY,KAAK,UAAU,iBAAiB,CAAC,GAAG,UAAU,MAAM;AACzE,cAAM,kBAAkB,CAAC,MAAM,YAAY,KAAK,KAAK,SAAS,MAAM;AACpE,cAAM,gBACH,CAAC,MAAM,YAAY,KAAK,SAAS,OAAO,MAAM,QAAQ,OACtD,CAAC,MAAM,YAAY,KAAK,SAAS,OAAO,MAAM,QAAQ;AAEzD,eAAO,mBAAmB,kBAAkB,mBAAmB,mBAAmB;AAAA,MACpF,CAAC;AAED,cAAQ,QAAQ;AAAA,IAClB;AAGA,UAAM,MAAM,MAAM,OAAO,WAAW;;AAGzB,YAAA,WAAAA,eAAAC,WAAA,EAAA,OAAM,iCAA6B,MAAA,CAAA,CAAA,qEAAA;UAG/B,QAAA,OAAO;;;;AAGL,YAAA,iBAAA,MAAiB,WAAM,GAAA;;;;AAMZC,wBAAA,iBAAA,QAAX,YAAO;oFAKXC,cAAA,OAAK,QAAQ,aAAa,OAAG,mDAAA,kBAC7B,OAAK,QAAQ,KAAK,8FAIuBC,eAAA,QAAQ,KAAK,sDACtB,QAAQ,UAAU,aAAS,kBAAA,mEACb,QAAQ,MAAM,eAAA,CAAc;;;;;;;;;;;;;;;;"}