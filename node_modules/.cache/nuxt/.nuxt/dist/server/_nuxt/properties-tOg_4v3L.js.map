{"version":3,"file":"properties-tOg_4v3L.js","sources":["../../../../../../../app/components/properties/filters/ListingFilters.vue","../../../../../../../app/pages/buy/dubai/properties.vue"],"sourcesContent":["<template>\r\n  <div class=\"filter-shadow bg-[#212121] rounded-2xl flex flex-wrap gap-4 text-white p-4 items-center\">\r\n    <!-- Property Type -->\r\n     <div class=\"grid grid-cols-5 gap-4 w-full max-sm:grid-cols-1\">\r\n    <USelectMenu\r\n      v-model=\"filters.category\"\r\n      :items=\"filterOptions.categories\"\r\n      placeholder=\"Property Type\"\r\n      class=\"w-full\"\r\n    />\r\n\r\n    <!-- Purpose -->\r\n    <USelectMenu\r\n      v-model=\"filters.purpose\"\r\n      :items=\"filterOptions.purposes\"\r\n      placeholder=\"Purpose\"\r\n      class=\"w-full\"\r\n    />\r\n\r\n    <!-- Location -->\r\n    <USelectMenu\r\n      v-model=\"filters.location\"\r\n      :items=\"filterOptions.locations\"\r\n      placeholder=\"Location\"\r\n      class=\"w-full\"\r\n    />\r\n\r\n    <!-- Bedrooms -->\r\n    <USelectMenu\r\n      v-model=\"filters.bedrooms\"\r\n      :items=\"filterOptions.bedrooms\"\r\n      placeholder=\"Bedrooms\"\r\n      class=\"w-full\"\r\n    />\r\n\r\n    <!-- Price Range -->\r\n    <div class=\"flex flex-col gap-2 w-full max-sm:w-full\">\r\n      <label class=\"text-sm text-gray-300\">Price Range (AED)</label>\r\n      <USlider\r\n        v-model=\"filters.priceRange\"\r\n        :min=\"filterOptions.prices.min\"\r\n        :max=\"filterOptions.prices.max\"\r\n        step=\"10000\"\r\n        range\r\n        color=\"amber\"\r\n        class=\"w-full cursor-grab\"\r\n      />\r\n      <div class=\"flex justify-between text-xs text-gray-400\">\r\n        <span>{{ filters.priceRange[0].toLocaleString() }}</span>\r\n        <span>{{ filters.priceRange[1].toLocaleString() }}</span>\r\n      </div>\r\n    </div>\r\n\r\n    </div>\r\n    <div class=\"flex justify-between w-full max-sm:flex-col gap-4 mt-4\">\r\n        <!-- Reset Button -->\r\n        <button\r\n          @click=\"resetFilters\"\r\n          class=\"w-auto button-mavrix-outline px-6 py-2 rounded-lg text-white cursor-pointer transition-all mt-2\"\r\n        >\r\n          Reset\r\n        </button>\r\n    <!-- Search Button -->\r\n    <button\r\n      @click=\"searchProperties\"\r\n      class=\"w-auto button-mavrix px-6 py-2 rounded-lg text-white cursor-pointer transition-all mt-2\"\r\n    >\r\n\r\n      Search\r\n    </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { getFilterOptions } from '@/services/filtersService'\r\n\r\nconst router = useRouter()\r\n\r\nconst filters = ref({\r\n  category: '',\r\n  purpose: '',\r\n  location: '',\r\n  bedrooms: '',\r\n  priceRange: [0, 0],\r\n})\r\n\r\nconst filterOptions = ref({\r\n  categories: [],\r\n  purposes: [],\r\n  bedrooms: [],\r\n  locations: [],\r\n  prices: { min: 0, max: 0 },\r\n})\r\nfunction resetFilters() {\r\n  filters.value = {\r\n    category: '',\r\n    purpose: '',\r\n    location: '',\r\n    bedrooms: '',\r\n    priceRange: [filterOptions.value.prices.min, filterOptions.value.prices.max],\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  const options = await getFilterOptions()\r\n  filterOptions.value = options\r\n  filters.value.priceRange = [options.prices.min, options.prices.max]\r\n})\r\n\r\nfunction searchProperties() {\r\n  const query = {\r\n    ...filters.value,\r\n    minPrice: filters.value.priceRange[0],\r\n    maxPrice: filters.value.priceRange[1],\r\n  }\r\n\r\n  delete query.priceRange // remove slider array before query\r\n\r\n  const queryString = new URLSearchParams(query).toString()\r\n  router.push(`/search-results?${queryString}`)\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.filter-shadow {\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);\r\n}\r\n</style>\r\n","<template>\r\n  <section class=\"bg-[#212121]px-8 py-16\">\r\n    <Divider />\r\n    <Breadcrumbs />\r\n    <div class=\"container mx-auto px-4\">\r\n      <div class=\"px-6 py-8 text-center\">\r\n        <h1 class=\"text-3xl font-light uppercase text-gray-200 mb-2\">\r\n          Dubai Luxury Properties\r\n        </h1>\r\n        <p class=\"text-gray-500\">Explore exclusive listings and refined investments</p>\r\n      </div>\r\n\r\n      <!-- Filter bar -->\r\n      <!-- <FilterTop @filter=\"applyFilters\" /> -->\r\n      <ListingFilters />\r\n      <!-- Loader -->\r\n      <div v-if=\"loading\" class=\"text-center text-gray-500 mt-8\">\r\n        <!-- Loading listings... -->\r\n        <span class=\"inline-flex items-center gap-2\">\r\n          <img src=\"/loader.svg\" alt=\"\" class=\"h-12 w-12 animate-spin\" />\r\n        </span>\r\n      </div>\r\n\r\n      <!-- Property cards -->\r\n      <div v-else class=\"grid lg:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-8 mt-6\">\r\n        <div v-for=\"property in listings\" :key=\"property.id\"\r\n          class=\"bg-[#212121] rounded-2xl property_card shadow-md hover:shadow-xl transition overflow-hidden group\">\r\n          <NuxtLink :to=\"`/${createSlug(property)}`\">\r\n            <!-- <img\r\n              :src=\"property.photos?.[0]?.full_path || 'https://placehold.co/600x400'\"\r\n              alt=\"Property\"\r\n              class=\"w-full h-56 object-cover group-hover:scale-105 transition-transform duration-300\"\r\n            /> -->\r\n            <div class=\"relative\">\r\n              <img :src=\"property.photos?.[0]?.full_path || '/images/properties/mavrix.jpg'\" alt=\"Property\"\r\n                class=\"h-40 w-full object-cover transform group-hover:scale-105 transition-transform duration-500 cursor-pointer\" />\r\n              <span class=\"absolute top-3 right-3 property-badge text-white text-xs px-3 py-1 rounded-full\">\r\n                {{ property.purpose }}\r\n              </span>\r\n            </div>\r\n          </NuxtLink>\r\n          <div class=\"p-5 flex flex-col flex-1\">\r\n            <h2 class=\"text-lg font-light text-gray-200 line-clamp-2\">\r\n              {{ property.title }}\r\n            </h2>\r\n\r\n            <div class=\"flex gap-2 items-center py-4\">\r\n              <MapPin color=\"#c99171\" class=\"h-8 w-8\" :stroke-width=\"1\" />\r\n              <p class=\"text-gray-400 text-sm\">{{ property.location?.full_path }}</p>\r\n            </div>\r\n\r\n            <div class=\"flex gap-2 border-t border-b py-3 my-2 justify-between\">\r\n              <div class=\"flex gap-2 px-2 align-middle items-center\">\r\n                <Wallet class=\"h-6 w-6\" :stroke-width=\"1\" />\r\n                <p class=\"text-md font-light text-mavrix\">\r\n                  AED {{ property.price?.toLocaleString() }}\r\n                </p>\r\n              </div>\r\n              <div class=\"flex gap-2 px-2 align-middle items-center\">\r\n                <Building2 class=\"h-6 w-6\" :stroke-width=\"1\" />\r\n                <p class=\"text-xs text-gray-400\">{{ property.category || 'N/A' }}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"flex gap-2 py-3\">\r\n              <div class=\"flex gap-2 px-2 items-center border-r border-r-gray-600\">\r\n                <BedDouble class=\"h-8 w-8\" :stroke-width=\"1\" />\r\n                <p class=\"text-xs text-gray-400\">{{ property.bed?.name || 'N/A' }}</p>\r\n              </div>\r\n              <div class=\"flex gap-2 px-2 items-center border-r border-r-gray-600\">\r\n                <Bath class=\"h-8 w-8\" :stroke-width=\"1\" />\r\n                <p class=\"text-xs text-gray-400\">{{ property.bath?.name || 'N/A' }}</p>\r\n              </div>\r\n              <div class=\"flex gap-2 px-2 items-center\">\r\n                <LandPlot class=\"h-8 w-8\" :stroke-width=\"1\" />\r\n                <p class=\"text-xs text-gray-400\">{{ property.built_size }} Sq.Ft.</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"flex justify-between gap-4 items-center mt-4\">\r\n              <NuxtLink :to=\"`/${createSlug(property)}`\"\r\n                class=\"button-mavrix w-full text-center font-light uppercase text-sm\">\r\n                View Details â†’\r\n              </NuxtLink>\r\n              <a :href=\"`tel:${property.user?.mobile}`\" class=\"button-mavrix-outline\">\r\n                <PhoneCall color=\"#c99171\" class=\"h-4 w-4\" :stroke-width=\"1\" />\r\n              </a>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- <div class=\"p-5\">\r\n            <h2 class=\"text-lg font-semibold text-gray-200 mb-2 line-clamp-1\">\r\n              {{ property.title }}\r\n            </h2>\r\n\r\n            <p class=\"text-sm text-gray-500 mb-2\">\r\n              {{ property.location?.full_path || 'Location not specified' }}\r\n            </p>\r\n\r\n            <div class=\"flex items-center justify-between\">\r\n              <p class=\"text-lg font-bold text-mavrix\">\r\n                AED {{ property.price?.toLocaleString() }}\r\n              </p>\r\n              <p class=\"text-sm text-gray-400\">Ref: {{ property.ref_number }}</p>\r\n            </div>\r\n\r\n            <div class=\"flex items-center gap-4 mt-3 text-gray-600\">\r\n              <span><i class=\"fa fa-bed mr-1\"></i>{{ property.bed?.name || '-' }} Bed</span>\r\n              <span><i class=\"fa fa-bath mr-1\"></i>{{ property.bath?.name || '-' }} Bath</span>\r\n            </div>\r\n\r\n            <NuxtLink\r\n              :to=\"`/${createSlug(property)}`\"\r\n              class=\"mt-4 inline-block w-full text-center py-2 button-mavrix text-white rounded-lg font-medium transition\"\r\n            >\r\n              View Details\r\n            </NuxtLink>\r\n          </div> -->\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Pagination -->\r\n      <div v-if=\"totalPages > 1\" class=\"flex justify-center mt-10 gap-2\">\r\n        <button v-for=\"pageNum in totalPages\" :key=\"pageNum\" @click=\"changePage(pageNum)\" :class=\"[\r\n          'px-4 py-2 rounded-lg border',\r\n          pageNum === page\r\n            ? 'button-mavrix text-white'\r\n            : 'bg-white text-gray-700 hover:bg-gray-200'\r\n        ]\">\r\n          {{ pageNum }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <Divider />\r\n\r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport Breadcrumbs from '~/components/templates/breadcrumbs.vue'\r\nimport Divider from '~/components/templates/divider.vue'\r\n// import FilterTop from '~/components/properties/filters/FilterTop.vue'\r\nimport { getListings } from '~/services/listingsService'\r\nimport { createSlug } from '~/utils/slugify'\r\nimport {\r\n  MapPin,\r\n  BedDouble,\r\n  Bath,\r\n  LandPlot,\r\n  PhoneCall,\r\n  Wallet,\r\n  Building2\r\n} from 'lucide-vue-next'\r\nimport ListingFilters from '~/components/properties/filters/ListingFilters.vue'\r\n// ðŸ§© State\r\nconst listings = ref([])\r\nconst loading = ref(false)\r\nconst page = ref(1)\r\nconst totalPages = ref(1)\r\nconst activeFilters = ref({\r\n  type: '',\r\n  location: '',\r\n  bedrooms: '',\r\n  price: [0, 10000000],\r\n})\r\n\r\n// ðŸ§  Fetch listings with filters + pagination\r\nconst fetchListings = async () => {\r\n  loading.value = true\r\n  try {\r\n    const res = await getListings({\r\n      page: page.value,\r\n      itemsPerPage: 9,\r\n      type: activeFilters.value.type,\r\n      location: activeFilters.value.location,\r\n      bedrooms: activeFilters.value.bedrooms,\r\n      minPrice: activeFilters.value.price[0],\r\n      maxPrice: activeFilters.value.price[1],\r\n    })\r\n    listings.value = res.data || []\r\n    totalPages.value = Math.ceil((res.totalRecords || 0) / 9)\r\n  } catch (err) {\r\n    console.error('Error fetching listings:', err)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// ðŸ”¹ Apply filters\r\nconst applyFilters = (filters) => {\r\n  activeFilters.value = filters\r\n  page.value = 1 // reset to first page\r\n  fetchListings()\r\n}\r\n\r\n// ðŸ”¹ Change page\r\nconst changePage = (num) => {\r\n  page.value = num\r\n  fetchListings()\r\n}\r\n\r\n// ðŸš€ Initial load\r\nonMounted(() => {\r\n  fetchListings()\r\n})\r\n</script>\r\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderAttr","_ssrRenderList","_unref","_push","_parent","_ssrInterpolate","_createVNode","_toDisplayString"],"mappings":"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"}