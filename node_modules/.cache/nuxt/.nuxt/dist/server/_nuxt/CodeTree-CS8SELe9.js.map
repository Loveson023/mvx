{"version":3,"file":"CodeTree-CS8SELe9.js","sources":["../../../../../../../virtual:nuxt:E%3A%2FVUE%2Fmvx%2Fnode_modules%2F.cache%2Fnuxt%2F.nuxt%2Fui%2Fprose%2Fcode-tree.ts","../../../../../../@nuxt/ui/dist/runtime/components/prose/CodeTree.vue"],"sourcesContent":["export default {\n  \"slots\": {\n    \"root\": \"relative lg:h-[450px] my-5 grid lg:grid-cols-3 border border-muted rounded-md\",\n    \"list\": \"isolate relative p-2 border-b lg:border-b-0 lg:border-e border-muted overflow-y-auto\",\n    \"item\": \"\",\n    \"listWithChildren\": \"ms-4.5 border-s border-default\",\n    \"itemWithChildren\": \"ps-1.5 -ms-px\",\n    \"link\": \"relative group peer w-full px-2.5 py-1.5 before:inset-y-px before:inset-x-0 flex items-center gap-1.5 text-sm before:absolute before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2\",\n    \"linkLeadingIcon\": \"size-4 shrink-0\",\n    \"linkLabel\": \"truncate\",\n    \"linkTrailing\": \"ms-auto inline-flex gap-1.5 items-center\",\n    \"linkTrailingIcon\": \"size-5 transform transition-transform duration-200 shrink-0 group-data-[expanded=true]:rotate-180\",\n    \"content\": \"overflow-hidden lg:col-span-2 flex flex-col [&>div]:my-0 [&>div]:flex-1 [&>div]:flex [&>div]:flex-col [&>div>div]:border-0 [&>div>pre]:border-b-0 [&>div>pre]:border-s-0 [&>div>pre]:border-e-0 [&>div>pre]:rounded-l-none [&>div>pre]:flex-1 [&>div]:overflow-y-auto\"\n  },\n  \"variants\": {\n    \"active\": {\n      \"true\": {\n        \"link\": \"text-highlighted before:bg-elevated\"\n      },\n      \"false\": {\n        \"link\": [\n          \"hover:text-highlighted hover:before:bg-elevated/50\",\n          \"transition-colors before:transition-colors\"\n        ]\n      }\n    }\n  }\n}","<script>\r\nimport theme from \"#build/ui/prose/code-tree\";\r\n</script>\r\n\r\n<script setup>\r\nimport { computed, ref, watch, onBeforeUpdate } from \"vue\";\r\nimport { TreeRoot, TreeItem } from \"reka-ui\";\r\nimport { createReusableTemplate } from \"@vueuse/core\";\r\nimport { useAppConfig } from \"#imports\";\r\nimport { tv } from \"../../utils/tv\";\r\nimport UCodeIcon from \"./CodeIcon.vue\";\r\nimport UIcon from \"../Icon.vue\";\r\ndefineOptions({ inheritAttrs: false });\r\nconst props = defineProps({\r\n  defaultValue: { type: String, required: false },\r\n  expandAll: { type: Boolean, required: false },\r\n  class: { type: null, required: false },\r\n  ui: { type: null, required: false }\r\n});\r\nconst slots = defineSlots();\r\nconst appConfig = useAppConfig();\r\nconst [DefineTreeTemplate, ReuseTreeTemplate] = createReusableTemplate();\r\nconst ui = computed(() => tv({ extend: tv(theme), ...appConfig.ui?.prose?.codeTree || {} })());\r\nconst model = ref(props.defaultValue ? { path: props.defaultValue } : void 0);\r\nconst lastSelectedItem = ref();\r\nconst rerenderCount = ref(1);\r\nconst flatItems = computed(() => {\r\n  rerenderCount.value;\r\n  return slots.default?.()?.flatMap(transformSlot).filter(Boolean) || [];\r\n});\r\nconst items = computed(() => buildTree(flatItems.value));\r\nfunction buildTree(items2) {\r\n  const map = /* @__PURE__ */ new Map();\r\n  const root = [];\r\n  items2.forEach((item) => {\r\n    const parts = item.label.split(\"/\");\r\n    let path = \"\";\r\n    parts.forEach((part, i) => {\r\n      path = path ? `${path}/${part}` : part;\r\n      if (!map.has(path)) {\r\n        const node = { label: part, path, ...i < parts.length - 1 && { children: [] } };\r\n        map.set(path, node);\r\n        if (i === 0) {\r\n          root.push(node);\r\n        } else {\r\n          map.get(parts.slice(0, i).join(\"/\"))?.children?.push(node);\r\n        }\r\n      }\r\n    });\r\n  });\r\n  const sort = (nodes) => nodes.sort(\r\n    (a, b) => !!a.children === !!b.children ? a.label.localeCompare(b.label) : b.children ? 1 : -1\r\n  ).map((n) => ({ ...n, children: n.children && sort(n.children) }));\r\n  return sort(root);\r\n}\r\nfunction transformSlot(slot, index) {\r\n  if (typeof slot.type === \"symbol\") {\r\n    return slot.children?.map(transformSlot);\r\n  }\r\n  return {\r\n    label: slot.props?.filename || slot.props?.label || `${index}`,\r\n    icon: slot.props?.icon,\r\n    component: slot\r\n  };\r\n}\r\nconst expanded = computed(() => {\r\n  if (props.expandAll) {\r\n    const allPaths = /* @__PURE__ */ new Set();\r\n    flatItems.value.forEach((item) => {\r\n      const parts2 = item.label.split(\"/\");\r\n      for (let i = 1; i < parts2.length; i++) {\r\n        allPaths.add(parts2.slice(0, i).join(\"/\"));\r\n      }\r\n    });\r\n    return Array.from(allPaths);\r\n  }\r\n  const path = model.value?.path;\r\n  if (!path) {\r\n    return [];\r\n  }\r\n  const parts = path.split(\"/\");\r\n  return parts.map((_, index) => parts.slice(0, index + 1).join(\"/\"));\r\n});\r\nwatch(model, (value) => {\r\n  const item = flatItems.value.find((item2) => value?.path === item2.label);\r\n  if (item?.component) {\r\n    lastSelectedItem.value = item;\r\n  }\r\n}, { immediate: true });\r\nonBeforeUpdate(() => rerenderCount.value++);\r\n</script>\r\n\r\n<template>\r\n  <DefineTreeTemplate v-slot=\"{ items, level }\">\r\n    <TreeItem\r\n      v-for=\"(item, index) in items\"\r\n      :key=\"`${level}-${index}`\"\r\n      v-slot=\"{ isExpanded, isSelected }\"\r\n      :level=\"level\"\r\n      :value=\"item\"\r\n      :class=\"level > 1 ? ui.itemWithChildren({ class: props.ui?.itemWithChildren }) : ui.item({ class: props.ui?.item })\"\r\n    >\r\n      <button\r\n        type=\"button\"\r\n        :data-expanded=\"isExpanded\"\r\n        :class=\"ui.link({ class: props.ui?.link, active: isSelected })\"\r\n      >\r\n        <UIcon\r\n          v-if=\"item.children?.length\"\r\n          :name=\"isExpanded ? appConfig.ui.icons.folderOpen : appConfig.ui.icons.folder\"\r\n          :class=\"ui.linkLeadingIcon({ class: props.ui?.linkLeadingIcon })\"\r\n        />\r\n        <UCodeIcon\r\n          v-else\r\n          :filename=\"item.label\"\r\n          :class=\"ui.linkLeadingIcon({ class: props.ui?.linkLeadingIcon })\"\r\n        />\r\n\r\n        <span :class=\"ui.linkLabel({ class: props.ui?.linkLabel })\">\r\n          {{ item.label }}\r\n        </span>\r\n\r\n        <span v-if=\"item.children?.length\" :class=\"ui.linkTrailing({ class: props.ui?.linkTrailing })\">\r\n          <UIcon\r\n            :name=\"appConfig.ui.icons.chevronDown\"\r\n            :class=\"ui.linkTrailingIcon({ class: props.ui?.linkTrailingIcon })\"\r\n          />\r\n        </span>\r\n      </button>\r\n\r\n      <ul\r\n        v-if=\"item.children?.length && isExpanded\"\r\n        role=\"group\"\r\n        :class=\"ui.listWithChildren({ class: props.ui?.listWithChildren })\"\r\n      >\r\n        <ReuseTreeTemplate :items=\"item.children\" :level=\"level + 1\" />\r\n      </ul>\r\n    </TreeItem>\r\n  </DefineTreeTemplate>\r\n\r\n  <div v-bind=\"$attrs\" :class=\"ui.root({ class: [props.ui?.root, props.class] })\">\r\n    <TreeRoot\r\n      v-model=\"model\"\r\n      :class=\"ui.list({ class: props.ui?.list })\"\r\n      :items=\"items\"\r\n      :get-key=\"(item2) => item2.path\"\r\n      :default-expanded=\"expanded\"\r\n    >\r\n      <ReuseTreeTemplate :items=\"items\" :level=\"1\" />\r\n    </TreeRoot>\r\n\r\n    <div :class=\"ui.content({ class: props.ui?.content })\">\r\n      <component :is=\"lastSelectedItem?.component\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n"],"names":["_useSlots","items","_push","_parent","_scopeId","_ssrRenderAttr","_unref","_ssrRenderClass","_ssrInterpolate","_createVNode","_createBlock","UIcon","UCodeIcon","_toDisplayString","_openBlock","_Fragment","_renderList","$attrs","_ssrRenderVNode","_resolveDynamicComponent"],"mappings":"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","x_google_ignoreList":[0]}