{"version":3,"file":"client-only-BwyiMxjW.js","sources":["../../../../../../nuxt/dist/app/components/server-placeholder.js","../../../../../../nuxt/dist/app/components/client-only.js"],"sourcesContent":["import { createElementBlock, defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n  name: \"ServerPlaceholder\",\r\n  render() {\r\n    return createElementBlock(\"div\");\r\n  }\r\n});\r\n","import { cloneVNode, createElementBlock, defineComponent, getCurrentInstance, h, onMounted, provide, shallowRef } from \"vue\";\r\nimport { isPromise } from \"@vue/shared\";\r\nimport { useNuxtApp } from \"../nuxt.js\";\r\nimport ServerPlaceholder from \"./server-placeholder.js\";\r\nimport { elToStaticVNode } from \"./utils.js\";\r\nexport const clientOnlySymbol = Symbol.for(\"nuxt:client-only\");\r\nconst STATIC_DIV = \"<div></div>\";\r\nexport default defineComponent({\r\n  name: \"ClientOnly\",\r\n  inheritAttrs: false,\r\n  props: [\"fallback\", \"placeholder\", \"placeholderTag\", \"fallbackTag\"],\r\n  ...import.meta.dev && {\r\n    slots: Object\r\n  },\r\n  setup(props, { slots, attrs }) {\r\n    const mounted = shallowRef(false);\r\n    onMounted(() => {\r\n      mounted.value = true;\r\n    });\r\n    if (import.meta.dev) {\r\n      const nuxtApp = useNuxtApp();\r\n      nuxtApp._isNuxtPageUsed = true;\r\n      nuxtApp._isNuxtLayoutUsed = true;\r\n    }\r\n    const vm = getCurrentInstance();\r\n    if (vm) {\r\n      vm._nuxtClientOnly = true;\r\n    }\r\n    provide(clientOnlySymbol, true);\r\n    return () => {\r\n      if (mounted.value) {\r\n        const vnodes = slots.default?.();\r\n        if (vnodes && vnodes.length === 1) {\r\n          return [cloneVNode(vnodes[0], attrs)];\r\n        }\r\n        return vnodes;\r\n      }\r\n      const slot = slots.fallback || slots.placeholder;\r\n      if (slot) {\r\n        return h(slot);\r\n      }\r\n      const fallbackStr = props.fallback || props.placeholder || \"\";\r\n      const fallbackTag = props.fallbackTag || props.placeholderTag || \"span\";\r\n      return createElementBlock(fallbackTag, attrs, fallbackStr);\r\n    };\r\n  }\r\n});\r\nconst cache = /* @__PURE__ */ new WeakMap();\r\n// @__NO_SIDE_EFFECTS__\r\nexport function createClientOnly(component) {\r\n  if (import.meta.server) {\r\n    return ServerPlaceholder;\r\n  }\r\n  if (cache.has(component)) {\r\n    return cache.get(component);\r\n  }\r\n  const clone = { ...component };\r\n  if (clone.render) {\r\n    clone.render = (ctx, cache2, $props, $setup, $data, $options) => {\r\n      if ($setup.mounted$ ?? ctx.mounted$) {\r\n        const res = component.render?.bind(ctx)(ctx, cache2, $props, $setup, $data, $options);\r\n        return res.children === null || typeof res.children === \"string\" ? cloneVNode(res) : h(res);\r\n      }\r\n      return elToStaticVNode(ctx._.vnode.el, STATIC_DIV);\r\n    };\r\n  } else {\r\n    clone.template &&= `\r\n      <template v-if=\"mounted$\">${component.template}</template>\r\n      <template v-else>${STATIC_DIV}</template>\r\n    `;\r\n  }\r\n  clone.setup = (props, ctx) => {\r\n    const nuxtApp = useNuxtApp();\r\n    const mounted$ = shallowRef(nuxtApp.isHydrating === false);\r\n    const instance = getCurrentInstance();\r\n    if (nuxtApp.isHydrating) {\r\n      const attrs = { ...instance.attrs };\r\n      const directives = extractDirectives(instance);\r\n      for (const key in attrs) {\r\n        delete instance.attrs[key];\r\n      }\r\n      onMounted(() => {\r\n        Object.assign(instance.attrs, attrs);\r\n        instance.vnode.dirs = directives;\r\n      });\r\n    }\r\n    onMounted(() => {\r\n      mounted$.value = true;\r\n    });\r\n    const setupState = component.setup?.(props, ctx) || {};\r\n    if (isPromise(setupState)) {\r\n      return Promise.resolve(setupState).then((setupState2) => {\r\n        if (typeof setupState2 !== \"function\") {\r\n          setupState2 ||= {};\r\n          setupState2.mounted$ = mounted$;\r\n          return setupState2;\r\n        }\r\n        return (...args) => {\r\n          if (mounted$.value || !nuxtApp.isHydrating) {\r\n            const res = setupState2(...args);\r\n            return res.children === null || typeof res.children === \"string\" ? cloneVNode(res) : h(res);\r\n          }\r\n          return elToStaticVNode(instance?.vnode.el, STATIC_DIV);\r\n        };\r\n      });\r\n    } else {\r\n      if (typeof setupState === \"function\") {\r\n        return (...args) => {\r\n          if (mounted$.value) {\r\n            const res = setupState(...args);\r\n            const attrs = clone.inheritAttrs !== false ? ctx.attrs : void 0;\r\n            return res.children === null || typeof res.children === \"string\" ? cloneVNode(res, attrs) : h(res, attrs);\r\n          }\r\n          return elToStaticVNode(instance?.vnode.el, STATIC_DIV);\r\n        };\r\n      }\r\n      return Object.assign(setupState, { mounted$ });\r\n    }\r\n  };\r\n  cache.set(component, clone);\r\n  return clone;\r\n}\r\nfunction extractDirectives(instance) {\r\n  if (!instance || !instance.vnode.dirs) {\r\n    return null;\r\n  }\r\n  const directives = instance.vnode.dirs;\r\n  instance.vnode.dirs = null;\r\n  return directives;\r\n}\r\n"],"names":[],"mappings":";;AACe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,SAAS;AACP,WAAO,mBAAmB,KAAK;AAAA,EACjC;AACF,CAAC;ACDM,MAAM,mBAAmB,OAAO,IAAI,kBAAkB;AAE7D,MAAA,qBAAe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,cAAc;AAAA,EACd,OAAO,CAAC,YAAY,eAAe,kBAAkB,aAAa;AAAA,EAClE,GAAG;AAAA,EAGH,MAAM,OAAO,EAAE,OAAO,MAAK,GAAI;AAC7B,UAAM,UAAU,WAAW,KAAK;AAShC,UAAM,KAAK;AACX,QAAI,IAAI;AACN,SAAG,kBAAkB;AAAA,IACvB;AACA,YAAQ,kBAAkB,IAAI;AAC9B,WAAO,MAAM;AACX,UAAI,QAAQ,OAAO;AACjB,cAAM,SAAS,MAAM;AACrB,YAAI,UAAU,OAAO,WAAW,GAAG;AACjC,iBAAO,CAAC,WAAW,OAAO,CAAC,GAAG,KAAK,CAAC;AAAA,QACtC;AACA,eAAO;AAAA,MACT;AACA,YAAM,OAAO,MAAM,YAAY,MAAM;AACrC,UAAI,MAAM;AACR,eAAO,EAAE,IAAI;AAAA,MACf;AACA,YAAM,cAAc,MAAM,YAAY,MAAM,eAAe;AAC3D,YAAM,cAAc,MAAM,eAAe,MAAM,kBAAkB;AACjE,aAAO,mBAAmB,aAAa,OAAO,WAAW;AAAA,IAC3D;AAAA,EACF;AACF,CAAC;"}