{"version":3,"file":"useFormField-WbuSM5T2.js","sources":["../../../../../../@nuxt/ui/dist/runtime/composables/useFormField.js"],"sourcesContent":["import { inject, computed, provide } from \"vue\";\r\nimport { useDebounceFn } from \"@vueuse/core\";\r\nexport const formOptionsInjectionKey = Symbol(\"nuxt-ui.form-options\");\r\nexport const formBusInjectionKey = Symbol(\"nuxt-ui.form-events\");\r\nexport const formStateInjectionKey = Symbol(\"nuxt-ui.form-state\");\r\nexport const formFieldInjectionKey = Symbol(\"nuxt-ui.form-field\");\r\nexport const inputIdInjectionKey = Symbol(\"nuxt-ui.input-id\");\r\nexport const formInputsInjectionKey = Symbol(\"nuxt-ui.form-inputs\");\r\nexport const formLoadingInjectionKey = Symbol(\"nuxt-ui.form-loading\");\r\nexport const formErrorsInjectionKey = Symbol(\"nuxt-ui.form-errors\");\r\nexport function useFormField(props, opts) {\r\n  const formOptions = inject(formOptionsInjectionKey, void 0);\r\n  const formBus = inject(formBusInjectionKey, void 0);\r\n  const formField = inject(formFieldInjectionKey, void 0);\r\n  const inputId = inject(inputIdInjectionKey, void 0);\r\n  provide(formFieldInjectionKey, void 0);\r\n  if (formField && inputId) {\r\n    if (opts?.bind === false) {\r\n      inputId.value = void 0;\r\n    } else if (props?.id) {\r\n      inputId.value = props?.id;\r\n    }\r\n  }\r\n  function emitFormEvent(type, name, eager) {\r\n    if (formBus && formField && name) {\r\n      formBus.emit({ type, name, eager });\r\n    }\r\n  }\r\n  function emitFormBlur() {\r\n    emitFormEvent(\"blur\", formField?.value.name);\r\n  }\r\n  function emitFormFocus() {\r\n    emitFormEvent(\"focus\", formField?.value.name);\r\n  }\r\n  function emitFormChange() {\r\n    emitFormEvent(\"change\", formField?.value.name);\r\n  }\r\n  const emitFormInput = useDebounceFn(\r\n    () => {\r\n      emitFormEvent(\"input\", formField?.value.name, !opts?.deferInputValidation || formField?.value.eagerValidation);\r\n    },\r\n    formField?.value.validateOnInputDelay ?? formOptions?.value.validateOnInputDelay ?? 0\r\n  );\r\n  return {\r\n    id: computed(() => props?.id ?? inputId?.value),\r\n    name: computed(() => props?.name ?? formField?.value.name),\r\n    size: computed(() => props?.size ?? formField?.value.size),\r\n    color: computed(() => formField?.value.error ? \"error\" : props?.color),\r\n    highlight: computed(() => formField?.value.error ? true : props?.highlight),\r\n    disabled: computed(() => formOptions?.value.disabled || props?.disabled),\r\n    emitFormBlur,\r\n    emitFormInput,\r\n    emitFormChange,\r\n    emitFormFocus,\r\n    ariaAttrs: computed(() => {\r\n      if (!formField?.value) return;\r\n      const descriptiveAttrs = [\"error\", \"hint\", \"description\", \"help\"].filter((type) => formField?.value?.[type]).map((type) => `${formField?.value.ariaId}-${type}`) || [];\r\n      const attrs = {\r\n        \"aria-invalid\": !!formField?.value.error\r\n      };\r\n      if (descriptiveAttrs.length > 0) {\r\n        attrs[\"aria-describedby\"] = descriptiveAttrs.join(\" \");\r\n      }\r\n      return attrs;\r\n    })\r\n  };\r\n}\r\n"],"names":[],"mappings":";;AAEO,MAAM,0BAA0B,OAAO,sBAAsB;AAC7D,MAAM,sBAAsB,OAAO,qBAAqB;AAEnD,MAAC,wBAAwB,OAAO,oBAAoB;AACpD,MAAC,sBAAsB,OAAO,kBAAkB;AAChD,MAAC,yBAAyB,OAAO,qBAAqB;AACtD,MAAC,0BAA0B,OAAO,sBAAsB;AACxD,MAAC,yBAAyB,OAAO,qBAAqB;AAC3D,SAAS,aAAa,OAAO,MAAM;AACxC,QAAM,cAAc,OAAO,yBAAyB,MAAM;AAC1D,QAAM,UAAU,OAAO,qBAAqB,MAAM;AAClD,QAAM,YAAY,OAAO,uBAAuB,MAAM;AACtD,QAAM,UAAU,OAAO,qBAAqB,MAAM;AAClD,UAAQ,uBAAuB,MAAM;AACrC,MAAI,aAAa,SAAS;AACxB,QAAI,MAAM,SAAS,OAAO;AACxB,cAAQ,QAAQ;AAAA,IAClB,WAAW,OAAO,IAAI;AACpB,cAAQ,QAAQ,OAAO;AAAA,IACzB;AAAA,EACF;AACA,WAAS,cAAc,MAAM,MAAM,OAAO;AACxC,QAAI,WAAW,aAAa,MAAM;AAChC,cAAQ,KAAK,EAAE,MAAM,MAAM,MAAK,CAAE;AAAA,IACpC;AAAA,EACF;AACA,WAAS,eAAe;AACtB,kBAAc,QAAQ,WAAW,MAAM,IAAI;AAAA,EAC7C;AACA,WAAS,gBAAgB;AACvB,kBAAc,SAAS,WAAW,MAAM,IAAI;AAAA,EAC9C;AACA,WAAS,iBAAiB;AACxB,kBAAc,UAAU,WAAW,MAAM,IAAI;AAAA,EAC/C;AACA,QAAM,gBAAgB;AAAA,IACpB,MAAM;AACJ,oBAAc,SAAS,WAAW,MAAM,MAAM,CAAC,MAAM,wBAAwB,WAAW,MAAM,eAAe;AAAA,IAC/G;AAAA,IACA,WAAW,MAAM,wBAAwB,aAAa,MAAM,wBAAwB;AAAA,EACxF;AACE,SAAO;AAAA,IACL,IAAI,SAAS,MAAM,OAAO,MAAM,SAAS,KAAK;AAAA,IAC9C,MAAM,SAAS,MAAM,OAAO,QAAQ,WAAW,MAAM,IAAI;AAAA,IACzD,MAAM,SAAS,MAAM,OAAO,QAAQ,WAAW,MAAM,IAAI;AAAA,IACzD,OAAO,SAAS,MAAM,WAAW,MAAM,QAAQ,UAAU,OAAO,KAAK;AAAA,IACrE,WAAW,SAAS,MAAM,WAAW,MAAM,QAAQ,OAAO,OAAO,SAAS;AAAA,IAC1E,UAAU,SAAS,MAAM,aAAa,MAAM,YAAY,OAAO,QAAQ;AAAA,IACvE;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,WAAW,SAAS,MAAM;AACxB,UAAI,CAAC,WAAW,MAAO;AACvB,YAAM,mBAAmB,CAAC,SAAS,QAAQ,eAAe,MAAM,EAAE,OAAO,CAAC,SAAS,WAAW,QAAQ,IAAI,CAAC,EAAE,IAAI,CAAC,SAAS,GAAG,WAAW,MAAM,MAAM,IAAI,IAAI,EAAE,KAAK,CAAA;AACpK,YAAM,QAAQ;AAAA,QACZ,gBAAgB,CAAC,CAAC,WAAW,MAAM;AAAA,MAC3C;AACM,UAAI,iBAAiB,SAAS,GAAG;AAC/B,cAAM,kBAAkB,IAAI,iBAAiB,KAAK,GAAG;AAAA,MACvD;AACA,aAAO;AAAA,IACT,CAAC;AAAA,EACL;AACA;"}