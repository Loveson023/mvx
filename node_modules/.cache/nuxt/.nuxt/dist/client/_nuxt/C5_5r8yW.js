import{_ as V}from"./CM_R6RnN.js";import{_ as B}from"./DoTzgg8q.js";import{B as R}from"./D6UtAn5g.js";import{D as v}from"./Cfl45Ncw.js";import{b as S}from"./C2FtWGnT.js";import{c as b}from"./DdfX6h-A.js";import{_ as L}from"./Cdl6832A.js";import{_ as A}from"./CQ7b-Cj8.js";import{am as $,r as h,o as k,d as x,e as f,q as e,i as r,s as u,h as F,F as y,p as w,k as P,$ as g,z as U,n as j}from"#entry";import{a as C}from"./R-lXtGyY.js";import{_ as D}from"./DlAUqK2U.js";import{M}from"./D9cJaz2g.js";import{W as E}from"./C6s6_eOb.js";import{B as N}from"./AhR5xxl1.js";import{B as q,a as z}from"./CzJiccdZ.js";import{L as I}from"./5pCxdk6p.js";import{P as O}from"./IuqaaAwL.js";import"./LVo1Ea_k.js";import"./CmXnf57N.js";import"./0BPB5sph.js";import"./DCYG-u79.js";import"./DbfU-Mil.js";import"./BULZMPmt.js";import"./aOyIz6ue.js";import"./0ZpgTOts.js";import"./CBK744UT.js";import"./Di5n2HNM.js";import"./BxH2QLwn.js";import"./DY0PcvWS.js";import"./B4-nkuyB.js";import"./D_rm8GfL.js";import"./BJ2ClxiI.js";import"./D7mSc8IU.js";import"./Wx-W4zGr.js";import"./Bst4NRke.js";import"./Bn5iRESE.js";import"./Drye20lR.js";import"./kdJ3rAsd.js";import"./Znh9stmw.js";import"./DU5UMTAL.js";import"./CTogekcK.js";import"./wf4mNpR4.js";import"./cyTEI2Zk.js";const T="https://elist.solz.cloud/backend/api/external/external-listings";async function W(){try{const n=await C.get(`${T}?page=1&itemsPerPage=100`),d=Array.isArray(n.data)?n.data:Array.isArray(n.data?.data)?n.data.data:Array.isArray(n.data?.listings)?n.data.listings:Array.isArray(n.data?.data?.listings)?n.data.data.listings:[];d.length||console.warn("⚠️ No listings found for filter extraction.");const t=[...new Set(d.map(o=>o.category).filter(Boolean))],i=[...new Set(d.map(o=>o.purpose).filter(Boolean))],_=[...new Set(d.map(o=>o.bed?.name).filter(Boolean))],c=d.map(o=>o.price).filter(Boolean),m=[...new Set(d.map(o=>o.location?.full_path_json?.[2]?.value).filter(Boolean))],s=c.length?Math.min(...c):0,l=c.length?Math.max(...c):0;return{categories:t,purposes:i,bedrooms:_,locations:m,prices:{min:s,max:l}}}catch(n){return console.error("❌ Error fetching filter options:",n),{categories:[],purposes:[],bedrooms:[],locations:[],prices:{min:0,max:0}}}}const G={class:"filter-shadow bg-[#212121] rounded-2xl flex flex-wrap gap-4 text-white p-4 items-center"},H={class:"grid grid-cols-5 gap-4 w-full max-sm:grid-cols-1"},J={class:"flex flex-col gap-2 w-full max-sm:w-full"},K={class:"flex justify-between text-xs text-gray-400"},Q={__name:"PropertiesFiltersListingFilters",setup(n){const d=$(),t=h({category:"",purpose:"",location:"",bedrooms:"",priceRange:[0,0]}),i=h({categories:[],purposes:[],bedrooms:[],locations:[],prices:{min:0,max:0}});function _(){t.value={category:"",purpose:"",location:"",bedrooms:"",priceRange:[i.value.prices.min,i.value.prices.max]}}k(async()=>{const m=await W();i.value=m,t.value.priceRange=[m.prices.min,m.prices.max]});function c(){const m={...t.value,minPrice:t.value.priceRange[0],maxPrice:t.value.priceRange[1]};delete m.priceRange;const s=new URLSearchParams(m).toString();d.push(`/search-results?${s}`)}return(m,s)=>{const l=L,o=A;return f(),x("div",G,[e("div",H,[r(l,{modelValue:t.value.category,"onUpdate:modelValue":s[0]||(s[0]=p=>t.value.category=p),items:i.value.categories,placeholder:"Property Type",class:"w-full"},null,8,["modelValue","items"]),r(l,{modelValue:t.value.purpose,"onUpdate:modelValue":s[1]||(s[1]=p=>t.value.purpose=p),items:i.value.purposes,placeholder:"Purpose",class:"w-full"},null,8,["modelValue","items"]),r(l,{modelValue:t.value.location,"onUpdate:modelValue":s[2]||(s[2]=p=>t.value.location=p),items:i.value.locations,placeholder:"Location",class:"w-full"},null,8,["modelValue","items"]),r(l,{modelValue:t.value.bedrooms,"onUpdate:modelValue":s[3]||(s[3]=p=>t.value.bedrooms=p),items:i.value.bedrooms,placeholder:"Bedrooms",class:"w-full"},null,8,["modelValue","items"]),e("div",J,[s[5]||(s[5]=e("label",{class:"text-sm text-gray-300"},"Price Range (AED)",-1)),r(o,{modelValue:t.value.priceRange,"onUpdate:modelValue":s[4]||(s[4]=p=>t.value.priceRange=p),min:i.value.prices.min,max:i.value.prices.max,step:"10000",range:"",color:"amber",class:"w-full cursor-grab"},null,8,["modelValue","min","max"]),e("div",K,[e("span",null,u(t.value.priceRange[0].toLocaleString()),1),e("span",null,u(t.value.priceRange[1].toLocaleString()),1)])])]),e("div",{class:"flex justify-between w-full max-sm:flex-col gap-4 mt-4"},[e("button",{onClick:_,class:"w-auto button-mavrix-outline px-6 py-2 rounded-lg text-white cursor-pointer transition-all mt-2"}," Reset "),e("button",{onClick:c,class:"w-auto button-mavrix px-6 py-2 rounded-lg text-white cursor-pointer transition-all mt-2"}," Search ")])])}}},X=D(Q,[["__scopeId","data-v-1bb31859"]]),Y={class:"bg-[#212121]px-8 py-16"},Z={class:"container mx-auto px-4"},ee={key:0,class:"text-center text-gray-500 mt-8"},te={key:1,class:"grid lg:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-8 mt-6"},se={class:"relative"},oe=["src"],ae={class:"absolute top-3 right-3 property-badge text-white text-xs px-3 py-1 rounded-full"},re={class:"p-5 flex flex-col flex-1"},ie={class:"text-lg font-light text-gray-200 line-clamp-2"},le={class:"flex gap-2 items-center py-4"},ne={class:"text-gray-400 text-sm"},ce={class:"flex gap-2 border-t border-b py-3 my-2 justify-between"},me={class:"flex gap-2 px-2 align-middle items-center"},pe={class:"text-md font-light text-mavrix"},de={class:"flex gap-2 px-2 align-middle items-center"},ue={class:"text-xs text-gray-400"},ge={class:"flex gap-2 py-3"},xe={class:"flex gap-2 px-2 items-center border-r border-r-gray-600"},fe={class:"text-xs text-gray-400"},_e={class:"flex gap-2 px-2 items-center border-r border-r-gray-600"},he={class:"text-xs text-gray-400"},ve={class:"flex gap-2 px-2 items-center"},be={class:"text-xs text-gray-400"},ye={class:"flex justify-between gap-4 items-center mt-4"},we=["href"],Pe={key:2,class:"flex justify-center mt-10 gap-2"},ke=["onClick"],xt={__name:"properties",setup(n){const d=h([]),t=h(!1),i=h(1),_=h(1),c=h({type:"",location:"",bedrooms:"",price:[0,1e7]}),m=async()=>{t.value=!0;try{const l=await S({page:i.value,itemsPerPage:9,type:c.value.type,location:c.value.location,bedrooms:c.value.bedrooms,minPrice:c.value.price[0],maxPrice:c.value.price[1]});d.value=l.data||[],_.value=Math.ceil((l.totalRecords||0)/9)}catch(l){console.error("Error fetching listings:",l)}finally{t.value=!1}},s=l=>{i.value=l,m()};return k(()=>{m()}),(l,o)=>{const p=V;return f(),x("section",Y,[r(v),r(R),e("div",Z,[o[2]||(o[2]=e("div",{class:"px-6 py-8 text-center"},[e("h1",{class:"text-3xl font-light uppercase text-gray-200 mb-2"}," Dubai Luxury Properties "),e("p",{class:"text-gray-500"},"Explore exclusive listings and refined investments")],-1)),r(X),t.value?(f(),x("div",ee,[...o[0]||(o[0]=[e("span",{class:"inline-flex items-center gap-2"},[e("img",{src:B,alt:"",class:"h-12 w-12 animate-spin"})],-1)])])):(f(),x("div",te,[(f(!0),x(y,null,w(d.value,a=>(f(),x("div",{key:a.id,class:"bg-[#212121] rounded-2xl property_card shadow-md hover:shadow-xl transition overflow-hidden group"},[r(p,{to:`/${g(b)(a)}`},{default:P(()=>[e("div",se,[e("img",{src:a.photos?.[0]?.full_path||"/images/properties/mavrix.jpg",alt:"Property",class:"h-40 w-full object-cover transform group-hover:scale-105 transition-transform duration-500 cursor-pointer"},null,8,oe),e("span",ae,u(a.purpose),1)])]),_:2},1032,["to"]),e("div",re,[e("h2",ie,u(a.title),1),e("div",le,[r(g(M),{color:"#c99171",class:"h-8 w-8","stroke-width":1}),e("p",ne,u(a.location?.full_path),1)]),e("div",ce,[e("div",me,[r(g(E),{class:"h-6 w-6","stroke-width":1}),e("p",pe," AED "+u(a.price?.toLocaleString()),1)]),e("div",de,[r(g(N),{class:"h-6 w-6","stroke-width":1}),e("p",ue,u(a.category||"N/A"),1)])]),e("div",ge,[e("div",xe,[r(g(q),{class:"h-8 w-8","stroke-width":1}),e("p",fe,u(a.bed?.name||"N/A"),1)]),e("div",_e,[r(g(z),{class:"h-8 w-8","stroke-width":1}),e("p",he,u(a.bath?.name||"N/A"),1)]),e("div",ve,[r(g(I),{class:"h-8 w-8","stroke-width":1}),e("p",be,u(a.built_size)+" Sq.Ft.",1)])]),e("div",ye,[r(p,{to:`/${g(b)(a)}`,class:"button-mavrix w-full text-center font-light uppercase text-sm"},{default:P(()=>[...o[1]||(o[1]=[U(" View Details → ",-1)])]),_:1},8,["to"]),e("a",{href:`tel:${a.user?.mobile}`,class:"button-mavrix-outline"},[r(g(O),{color:"#c99171",class:"h-4 w-4","stroke-width":1})],8,we)])])]))),128))])),_.value>1?(f(),x("div",Pe,[(f(!0),x(y,null,w(_.value,a=>(f(),x("button",{key:a,onClick:Ve=>s(a),class:j(["px-4 py-2 rounded-lg border",a===i.value?"button-mavrix text-white":"bg-white text-gray-700 hover:bg-gray-200"])},u(a),11,ke))),128))])):F("",!0)]),r(v)])}}};export{xt as default};
