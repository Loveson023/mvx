import { ssrRenderAttrs, ssrRenderComponent, ssrInterpolate, ssrRenderList, ssrRenderClass, ssrRenderVNode } from "vue/server-renderer";
import { computed, mergeProps, useSSRContext, defineComponent, ref, unref, createVNode, resolveDynamicComponent, withCtx, createTextVNode, toValue, reactive } from "vue";
import { _ as _sfc_main$6 } from "./SelectMenu-uBmdvJiW.js";
import { _ as _export_sfc } from "./_plugin-vue_export-helper-1tPrXgE0.js";
import { _ as _sfc_main$7 } from "./Slider-C_LRI16S.js";
import { _ as _sfc_main$8 } from "./Input-LEel6pki.js";
import { _ as _sfc_main$9 } from "./Button-DdQxHajf.js";
import { SlidersVertical, Waves, Dumbbell, Car, Flower, ShieldCheck, Home, Dog, Key } from "lucide-vue-next";
import { hash } from "E:/VUE/mvx/node_modules/ohash/dist/index.mjs";
import { isPlainObject } from "@vue/shared";
import { l as fetchDefaults, m as useRequestFetch } from "../server.mjs";
import { u as useAsyncData } from "./asyncData-DzZ9Lhv5.js";
const _sfc_main$5 = {
  __name: "PropertiesFiltersCategory",
  __ssrInlineRender: true,
  props: {
    modelValue: String,
    items: {
      type: Array,
      default: () => []
    }
  },
  emits: ["update:modelValue"],
  setup(__props, { emit: __emit }) {
    const props = __props;
    const emit = __emit;
    const model = computed({
      get: () => props.modelValue,
      set: (val) => emit("update:modelValue", val)
    });
    return (_ctx, _push, _parent, _attrs) => {
      const _component_USelectMenu = _sfc_main$6;
      _push(`<div${ssrRenderAttrs(mergeProps({ class: "w-full" }, _attrs))}><label class="block text-xs text-gray-400 mb-1">Property Category</label>`);
      _push(ssrRenderComponent(_component_USelectMenu, {
        modelValue: model.value,
        "onUpdate:modelValue": ($event) => model.value = $event,
        items: __props.items,
        placeholder: "Select Category",
        class: "w-56"
      }, null, _parent));
      _push(`</div>`);
    };
  }
};
const _sfc_setup$5 = _sfc_main$5.setup;
_sfc_main$5.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/properties/filters/Category.vue");
  return _sfc_setup$5 ? _sfc_setup$5(props, ctx) : void 0;
};
const _sfc_main$4 = /* @__PURE__ */ defineComponent({
  __name: "Locations",
  __ssrInlineRender: true,
  props: {
    modelValue: String,
    data: {
      type: Array,
      required: true,
      default: () => []
    }
  },
  emits: ["update:modelValue"],
  setup(__props, { emit: __emit }) {
    const props = __props;
    const emit = __emit;
    const model = computed({
      get: () => props.modelValue,
      set: (val) => emit("update:modelValue", val)
    });
    const uniqueLocations = computed(() => {
      const locs = props.data.map((p) => p.location?.full_path).filter(Boolean);
      return ["All", ...new Set(locs)];
    });
    return (_ctx, _push, _parent, _attrs) => {
      const _component_USelectMenu = _sfc_main$6;
      _push(`<div${ssrRenderAttrs(mergeProps({ class: "w-full" }, _attrs))}><label class="block text-xs text-gray-400 mb-1">Location</label>`);
      _push(ssrRenderComponent(_component_USelectMenu, {
        modelValue: model.value,
        "onUpdate:modelValue": ($event) => model.value = $event,
        items: uniqueLocations.value,
        placeholder: "All Locations",
        searchable: "",
        class: "w-full border border-none py-3 px-4 rounded-none text-gray-200"
      }, null, _parent));
      _push(`</div>`);
    };
  }
});
const _sfc_setup$4 = _sfc_main$4.setup;
_sfc_main$4.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/properties/filters/Locations.vue");
  return _sfc_setup$4 ? _sfc_setup$4(props, ctx) : void 0;
};
const Locations = Object.assign(_sfc_main$4, { __name: "PropertiesFiltersLocations" });
const _sfc_main$3 = /* @__PURE__ */ defineComponent({
  __name: "Bedrooms",
  __ssrInlineRender: true,
  props: {
    modelValue: String,
    data: {
      type: Array,
      required: true,
      default: () => []
    }
  },
  emits: ["update:modelValue"],
  setup(__props, { emit: __emit }) {
    const props = __props;
    const emit = __emit;
    const model = computed({
      get: () => props.modelValue,
      set: (val) => emit("update:modelValue", val)
    });
    const uniqueBeds = computed(() => {
      const beds = props.data.map((p) => p.bedrooms || p.bed?.name).filter(Boolean);
      return ["Any", ...new Set(beds)];
    });
    return (_ctx, _push, _parent, _attrs) => {
      const _component_USelectMenu = _sfc_main$6;
      _push(`<div${ssrRenderAttrs(mergeProps({ class: "w-full" }, _attrs))} data-v-314f1767><label class="block text-xs text-gray-400 mb-1" data-v-314f1767>Bedrooms</label>`);
      _push(ssrRenderComponent(_component_USelectMenu, {
        modelValue: model.value,
        "onUpdate:modelValue": ($event) => model.value = $event,
        items: uniqueBeds.value,
        placeholder: "Any Bedrooms",
        class: "w-full border border-none py-3 px-4 rounded-none text-gray-200"
      }, null, _parent));
      _push(`</div>`);
    };
  }
});
const _sfc_setup$3 = _sfc_main$3.setup;
_sfc_main$3.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/properties/filters/Bedrooms.vue");
  return _sfc_setup$3 ? _sfc_setup$3(props, ctx) : void 0;
};
const Bedrooms = /* @__PURE__ */ Object.assign(_export_sfc(_sfc_main$3, [["__scopeId", "data-v-314f1767"]]), { __name: "PropertiesFiltersBedrooms" });
const _sfc_main$2 = /* @__PURE__ */ defineComponent({
  __name: "PriceRange",
  __ssrInlineRender: true,
  props: { modelValue: Array },
  emits: ["update:modelValue"],
  setup(__props, { emit: __emit }) {
    const props = __props;
    const emit = __emit;
    const model = computed({
      get: () => props.modelValue,
      set: (val) => emit("update:modelValue", val)
    });
    return (_ctx, _push, _parent, _attrs) => {
      const _component_USlider = _sfc_main$7;
      _push(`<div${ssrRenderAttrs(mergeProps({ class: "w-full" }, _attrs))} data-v-492abfbd><label class="block text-xs text-gray-400 mb-2" data-v-492abfbd>Price Range (AED)</label><div class="w-full border border-mavrix ring-accented py-4 px-4 rounded-none text-gray-200" data-v-492abfbd>`);
      _push(ssrRenderComponent(_component_USlider, {
        modelValue: model.value,
        "onUpdate:modelValue": ($event) => model.value = $event,
        min: 0,
        max: 1e7,
        step: 1e5,
        range: "",
        class: "custom-slider cursor-grab"
      }, null, _parent));
      _push(`</div><div class="text-xs text-gray-300 mt-2 flex justify-between" data-v-492abfbd><span data-v-492abfbd>Min: ${ssrInterpolate(_ctx.format(model.value[0]))}</span><span data-v-492abfbd>Max: ${ssrInterpolate(_ctx.format(model.value[1]))}</span></div></div>`);
    };
  }
});
const _sfc_setup$2 = _sfc_main$2.setup;
_sfc_main$2.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/properties/filters/PriceRange.vue");
  return _sfc_setup$2 ? _sfc_setup$2(props, ctx) : void 0;
};
const PriceRange = /* @__PURE__ */ Object.assign(_export_sfc(_sfc_main$2, [["__scopeId", "data-v-492abfbd"]]), { __name: "PropertiesFiltersPriceRange" });
const _sfc_main$1 = /* @__PURE__ */ defineComponent({
  __name: "AllFilters",
  __ssrInlineRender: true,
  props: {
    data: { type: Array, default: () => [] }
  },
  emits: ["apply"],
  setup(__props, { emit: __emit }) {
    const amenities = [
      { name: "Pool", icon: Waves },
      { name: "Gym", icon: Dumbbell },
      { name: "Parking", icon: Car },
      { name: "Garden", icon: Flower },
      { name: "Security", icon: ShieldCheck },
      { name: "Maid Room", icon: Home },
      { name: "Pets Allowed", icon: Dog },
      { name: "Key Card Access", icon: Key }
    ];
    const props = __props;
    const emit = __emit;
    const isOpen = ref(false);
    const filters = ref({
      location: "",
      category: "",
      bedrooms: "",
      bathrooms: "",
      price: [0, 2e7],
      minArea: "",
      maxArea: "",
      // furnishing: '',
      keyword: "",
      amenities: []
    });
    computed(
      () => [...new Set(props.data.map((p) => p.location?.full_path).filter(Boolean))]
    );
    computed(
      () => [...new Set(props.data.map((p) => p.category).filter(Boolean))]
    );
    computed(
      () => [...new Set(props.data.map((p) => p.bed?.name).filter(Boolean))]
    );
    computed(
      () => [...new Set(props.data.map((p) => p.bath?.name).filter(Boolean))]
    );
    const applyFilters2 = () => {
      emit("apply", filters.value);
      isOpen.value = false;
    };
    const resetFilters = () => {
      filters.value = {
        location: "",
        category: "",
        bedrooms: "",
        bathrooms: "",
        price: [0, 2e7],
        minArea: "",
        maxArea: "",
        // furnishing: '',
        keyword: "",
        amenities: []
      };
      emit("apply", filters.value);
      isOpen.value = false;
    };
    return (_ctx, _push, _parent, _attrs) => {
      const _component_UInput = _sfc_main$8;
      const _component_UButton = _sfc_main$9;
      _push(`<div${ssrRenderAttrs(mergeProps({ class: "w-full" }, _attrs))} data-v-a5f64ffa><button class="cursor-pointer flex items-center gap-2 px-4 py-2 button-mavrix shadow transition" data-v-a5f64ffa><div class="flex items-center gap-4" data-v-a5f64ffa>`);
      _push(ssrRenderComponent(unref(SlidersVertical), { "stroke-width": 1 }, null, _parent));
      _push(`<span class="ml-1" data-v-a5f64ffa>All Filters</span></div></button>`);
      if (isOpen.value) {
        _push(`<div class="mt-4 p-6 border-gray-700 property_card rounded flex flex-col gap-4 bg-[#212121] text-gray-200" data-v-a5f64ffa><div class="col-span-3" data-v-a5f64ffa><label class="block text-sm font-light mb-1" data-v-a5f64ffa>Property / Location</label>`);
        _push(ssrRenderComponent(_component_UInput, {
          modelValue: filters.value.keyword,
          "onUpdate:modelValue": ($event) => filters.value.keyword = $event,
          placeholder: "Search for Property / Location",
          class: "w-full"
        }, null, _parent));
        _push(`</div><div class="flex flex-row max-sm:flex-col gap-4" data-v-a5f64ffa>`);
        _push(ssrRenderComponent(_sfc_main$5, {
          modelValue: filters.value.type,
          "onUpdate:modelValue": ($event) => filters.value.type = $event,
          data: __props.data
        }, null, _parent));
        _push(ssrRenderComponent(Locations, {
          modelValue: filters.value.location,
          "onUpdate:modelValue": ($event) => filters.value.location = $event,
          data: __props.data
        }, null, _parent));
        _push(ssrRenderComponent(Bedrooms, {
          modelValue: filters.value.bedrooms,
          "onUpdate:modelValue": ($event) => filters.value.bedrooms = $event,
          data: __props.data
        }, null, _parent));
        _push(ssrRenderComponent(PriceRange, {
          modelValue: filters.value.price,
          "onUpdate:modelValue": ($event) => filters.value.price = $event
        }, null, _parent));
        _push(`</div><div class="md:col-span-3" data-v-a5f64ffa><label class="block text-sm font-semibold text-gray-700 mb-2" data-v-a5f64ffa>Amenities</label><div class="flex flex-wrap gap-3" data-v-a5f64ffa><!--[-->`);
        ssrRenderList(amenities, (amenity) => {
          _push(`<label class="${ssrRenderClass([
            "flex items-center gap-2 border px-8 py-4 border text-sm cursor-pointer select-none transition",
            filters.value.amenities.includes(amenity.name) ? " button-mavrix text-gray-200" : " border-gray-300 text-gray-200"
          ])}" data-v-a5f64ffa>`);
          ssrRenderVNode(_push, createVNode(resolveDynamicComponent(amenity.icon), {
            class: [
              "w-6 h-6 transition",
              filters.value.amenities.includes(amenity.name) ? "text-gray-200" : "text-gray-200"
            ]
          }, null), _parent);
          _push(`<span data-v-a5f64ffa>${ssrInterpolate(amenity.name)}</span></label>`);
        });
        _push(`<!--]--></div></div><div class="md:col-span-3 flex justify-end gap-3 mt-4" data-v-a5f64ffa>`);
        _push(ssrRenderComponent(_component_UButton, {
          variant: "soft",
          class: "button-mavrix-outline cursor-pointer",
          onClick: resetFilters
        }, {
          default: withCtx((_, _push2, _parent2, _scopeId) => {
            if (_push2) {
              _push2(` Reset `);
            } else {
              return [
                createTextVNode(" Reset ")
              ];
            }
          }),
          _: 1
        }, _parent));
        _push(ssrRenderComponent(_component_UButton, {
          class: "button-mavrix cursor-pointer",
          onClick: applyFilters2
        }, {
          default: withCtx((_, _push2, _parent2, _scopeId) => {
            if (_push2) {
              _push2(` Apply Filters `);
            } else {
              return [
                createTextVNode(" Apply Filters ")
              ];
            }
          }),
          _: 1
        }, _parent));
        _push(`</div></div>`);
      } else {
        _push(`<!---->`);
      }
      _push(`</div>`);
    };
  }
});
const _sfc_setup$1 = _sfc_main$1.setup;
_sfc_main$1.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/properties/filters/AllFilters.vue");
  return _sfc_setup$1 ? _sfc_setup$1(props, ctx) : void 0;
};
const AllFilters = /* @__PURE__ */ Object.assign(_export_sfc(_sfc_main$1, [["__scopeId", "data-v-a5f64ffa"]]), { __name: "PropertiesFiltersAllFilters" });
const _sfc_main = {
  __name: "PropertiesFiltersFilterTop",
  __ssrInlineRender: true,
  props: {
    options: {
      type: Object,
      required: true
    }
  },
  emits: ["filter"],
  setup(__props, { emit: __emit }) {
    const filters = ref({
      category: "Any",
      location: "Any",
      bedrooms: "Any",
      price: [0, 1e7]
    });
    const updateFiltersFromAdvanced = (advancedFilters) => {
      filters.value = {
        ...filters.value,
        ...advancedFilters
      };
      applyFilters();
    };
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<!--[--><div class="filter-shadow property_card rounded bg-[#212121] flex flex-col gap-4 p-4"><div class="flex flex-row max-sm:flex-col gap-4 items-center">`);
      _push(ssrRenderComponent(_sfc_main$5, {
        modelValue: filters.value.category,
        "onUpdate:modelValue": ($event) => filters.value.category = $event,
        items: __props.options.categories
      }, null, _parent));
      _push(ssrRenderComponent(Locations, {
        modelValue: filters.value.location,
        "onUpdate:modelValue": ($event) => filters.value.location = $event,
        items: __props.options.locations
      }, null, _parent));
      _push(ssrRenderComponent(Bedrooms, {
        modelValue: filters.value.bedrooms,
        "onUpdate:modelValue": ($event) => filters.value.bedrooms = $event,
        items: __props.options.bedrooms
      }, null, _parent));
      _push(ssrRenderComponent(PriceRange, {
        modelValue: filters.value.price,
        "onUpdate:modelValue": ($event) => filters.value.price = $event
      }, null, _parent));
      _push(`<button class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"> Apply Filters </button></div></div><div class="mt-4">`);
      _push(ssrRenderComponent(AllFilters, {
        data: _ctx.data,
        onApply: updateFiltersFromAdvanced
      }, null, _parent));
      _push(`</div><!--]-->`);
    };
  }
};
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/properties/filters/FilterTop.vue");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
function useFetch(request, arg1, arg2) {
  const [opts = {}, autoKey] = typeof arg1 === "string" ? [{}, arg1] : [arg1, arg2];
  const _request = computed(() => toValue(request));
  const key = computed(() => toValue(opts.key) || "$f" + hash([autoKey, typeof _request.value === "string" ? _request.value : "", ...generateOptionSegments(opts)]));
  if (!opts.baseURL && typeof _request.value === "string" && (_request.value[0] === "/" && _request.value[1] === "/")) {
    throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');
  }
  const {
    server,
    lazy,
    default: defaultFn,
    transform,
    pick,
    watch: watchSources,
    immediate,
    getCachedData,
    deep,
    dedupe,
    ...fetchOptions
  } = opts;
  const _fetchOptions = reactive({
    ...fetchDefaults,
    ...fetchOptions,
    cache: typeof opts.cache === "boolean" ? void 0 : opts.cache
  });
  const _asyncDataOptions = {
    server,
    lazy,
    default: defaultFn,
    transform,
    pick,
    immediate,
    getCachedData,
    deep,
    dedupe,
    watch: watchSources === false ? [] : [...watchSources || [], _fetchOptions]
  };
  let controller;
  const asyncData = useAsyncData(watchSources === false ? key.value : key, () => {
    controller?.abort?.(new DOMException("Request aborted as another request to the same endpoint was initiated.", "AbortError"));
    controller = typeof AbortController !== "undefined" ? new AbortController() : {};
    const timeoutLength = toValue(opts.timeout);
    let timeoutId;
    if (timeoutLength) {
      timeoutId = setTimeout(() => controller.abort(new DOMException("Request aborted due to timeout.", "AbortError")), timeoutLength);
      controller.signal.onabort = () => clearTimeout(timeoutId);
    }
    let _$fetch = opts.$fetch || globalThis.$fetch;
    if (!opts.$fetch) {
      const isLocalFetch = typeof _request.value === "string" && _request.value[0] === "/" && (!toValue(opts.baseURL) || toValue(opts.baseURL)[0] === "/");
      if (isLocalFetch) {
        _$fetch = useRequestFetch();
      }
    }
    return _$fetch(_request.value, { signal: controller.signal, ..._fetchOptions }).finally(() => {
      clearTimeout(timeoutId);
    });
  }, _asyncDataOptions);
  return asyncData;
}
function generateOptionSegments(opts) {
  const segments = [
    toValue(opts.method)?.toUpperCase() || "GET",
    toValue(opts.baseURL)
  ];
  for (const _obj of [opts.params || opts.query]) {
    const obj = toValue(_obj);
    if (!obj) {
      continue;
    }
    const unwrapped = {};
    for (const [key, value] of Object.entries(obj)) {
      unwrapped[toValue(key)] = toValue(value);
    }
    segments.push(unwrapped);
  }
  if (opts.body) {
    const value = toValue(opts.body);
    if (!value) {
      segments.push(hash(value));
    } else if (value instanceof ArrayBuffer) {
      segments.push(hash(Object.fromEntries([...new Uint8Array(value).entries()].map(([k, v]) => [k, v.toString()]))));
    } else if (value instanceof FormData) {
      const obj = {};
      for (const entry of value.entries()) {
        const [key, val] = entry;
        obj[key] = val instanceof File ? val.name : val;
      }
      segments.push(hash(obj));
    } else if (isPlainObject(value)) {
      segments.push(hash(reactive(value)));
    } else {
      try {
        segments.push(hash(value));
      } catch {
        console.warn("[useFetch] Failed to hash body", value);
      }
    }
  }
  return segments;
}
export {
  _sfc_main as _,
  useFetch as u
};
//# sourceMappingURL=fetch-BhTUiDx6.js.map
