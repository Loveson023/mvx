import{S as v}from"./BxH2QLwn.js";import{a as C}from"./CBK744UT.js";import{r as m,c as u,S as x,Y as d,ak as I,O as k,V as p,w as $,W as g}from"#entry";function P(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function E(){const e=m(),c=u(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:C(e));return{primitiveElement:e,currentElement:c}}const w="data-reka-collection-item";function _(e={}){const{key:c="",isProvider:A=!1}=e,f=`${c}CollectionProvider`;let t;if(A){const n=m(new Map);t={collectionRef:m(),itemMap:n},g(f,t)}else t=x(f);const M=(n=!1)=>{const l=t.collectionRef.value;if(!l)return[];const o=Array.from(l.querySelectorAll(`[${w}]`)),r=Array.from(t.itemMap.value.values()).sort((i,s)=>o.indexOf(i.ref)-o.indexOf(s.ref));return n?r:r.filter(i=>i.ref.dataset.disabled!=="")},R=d({name:"CollectionSlot",setup(n,{slots:l}){const{primitiveElement:o,currentElement:a}=E();return $(a,()=>{t.collectionRef.value=a.value}),()=>p(v,{ref:o},l)}}),h=d({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(n,{slots:l,attrs:o}){const{primitiveElement:a,currentElement:r}=E();return I(i=>{if(r.value){const s=k(r.value);t.itemMap.value.set(s,{ref:r.value,value:n.value}),i(()=>t.itemMap.value.delete(s))}}),()=>p(v,{...o,[w]:"",ref:a},l)}}),S=u(()=>Array.from(t.itemMap.value.values())),y=u(()=>t.itemMap.value.size);return{getItems:M,reactiveItems:S,itemMapSize:y,CollectionSlot:R,CollectionItem:h}}export{E as a,P as g,_ as u};
