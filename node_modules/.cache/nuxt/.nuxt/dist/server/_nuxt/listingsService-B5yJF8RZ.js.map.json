{"file":"listingsService-B5yJF8RZ.js","mappings":";AAKA,MAAM,WAAW;AAoCjB,eAAsB,eAAe,SAAS,IAAI;AAChD,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,IAAI,GAAG,QAAQ,4BAA4B,EAAE,QAAQ;AAClF,UAAM,WACJ,SAAS,MAAM,QACf,SAAS,MAAM,YACf,SAAS,QACT,CAAA;AAEF,WAAO;AAAA,EACT,SAAS,OAAO;AACd,YAAQ,MAAM,4BAA4B,KAAK;AAC/C,WAAO,CAAA;AAAA,EACT;AAEF;AAuCA,eAAsB,gBAAgB,WAAW;AAC/C,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,IAAI,GAAG,QAAQ,qBAAqB,SAAS,EAAE;AAC5E,UAAM,WAAW,SAAS,MAAM,QAAQ,CAAA;AAExC,YAAQ,IAAI,qBAAqB,QAAQ;AAGzC,WAAO,SAAS,SAAS,SAAS,CAAC,IAAI;AAAA,EACzC,SAAS,OAAO;AACd,YAAQ,MAAM,mCAAmC,KAAK;AACtD,WAAO;AAAA,EACT;AACF;","names":[],"sources":["../../../../../../../app/services/listingsService.js"],"sourcesContent":["// /services/listingsService.js\r\n// services/listingsService.js\r\n// import { a } from '#build/ui/prose'\r\nimport axios from 'axios'\r\n\r\nconst BASE_URL = 'https://elist.solz.cloud/backend/api/external/external-listings'\r\n\r\nexport async function getListings(params = {}) {\r\n  try {\r\n    // âœ… Ensure numeric values\r\n    const queryParams = {\r\n      page: typeof params.page === 'number' ? params.page : 1,\r\n      itemsPerPage: typeof params.itemsPerPage === 'number' ? params.itemsPerPage : 20,\r\n      sortBy: params.sortBy || '',\r\n      orderBy: params.orderBy || '',\r\n      searchTerm: params.searchTerm || '',\r\n      type: params.type || '',\r\n      location: params.location || '',\r\n      bedrooms: params.bedrooms || '',\r\n      minPrice: params.minPrice || '',\r\n      maxPrice: params.maxPrice || '',\r\n      category: params.category || '',\r\n      purpose: params.purpose || '',\r\n      amenities: params.amenities || '',\r\n      \r\n    }\r\n\r\n    console.log('Fetching listings with params:', queryParams)\r\n\r\n    const { data } = await axios.get(BASE_URL, { params: queryParams })\r\n    return data\r\n  } catch (error) {\r\n    console.error('Error fetching listings:', error)\r\n    return { data: [] }\r\n  }\r\n}\r\n// /services/listingsService.js\r\n// import axios from 'axios'\r\n\r\n// const API_URL = 'https://elist.solz.cloud/backend/api/external/external-listings'\r\n\r\nexport async function getAllListings(params = {}) {\r\n  try {\r\n    const response = await axios.get(`${BASE_URL}?page=1&itemsPerPage=100`, { params })\r\n    const listings =\r\n      response.data?.data ||\r\n      response.data?.listings ||\r\n      response.data ||\r\n      []\r\n\r\n    return listings\r\n  } catch (error) {\r\n    console.error('Error fetching listings:', error)\r\n    return []\r\n  }\r\n\r\n}\r\n\r\n\r\n// import axios from 'axios'\r\n// const BASE_URL = 'https://elist.solz.cloud/backend/api/external/external-listings'\r\n\r\n// export async function getListings(page = 1, itemsPerPage = 20) {\r\n//   try {\r\n//     const url = `${BASE_URL}?page=${page}&itemsPerPage=${itemsPerPage}`\r\n//     const response = await axios.get(url)\r\n//     return response.data?.data || []\r\n//   } catch (error) {\r\n//     console.error('Error fetching listings:', error)\r\n//     return []\r\n//   }\r\n// }\r\n// export async function getListings(params = {}) {\r\n//   try {\r\n//     const query = new URLSearchParams(params).toString()\r\n//     const response = await axios.get(`${BASE_URL}?${query}`)\r\n//     return response.data\r\n//   } catch (error) {\r\n//     console.error('Error fetching listings:', error)\r\n//     return { data: [], totalRecords: 0 }\r\n//   }\r\n// }\r\n\r\n// export async function getListingByRef(refNumber) {\r\n//   try {\r\n//     const url = `${BASE_URL}?searchTerm=${refNumber}`\r\n//     const response = await fetch(url)\r\n//     const data = await response.json()\r\n//     const listing = data?.data?.find(item => item.ref_number === refNumber)\r\n//     return listing || null\r\n//   } catch (error) {\r\n//     console.error('Error fetching property by ref:', error)\r\n//     return null\r\n//   }\r\n// }\r\nexport async function getListingByRef(refNumber) {\r\n  try {\r\n    const response = await axios.get(`${BASE_URL}?searchTerm=elist-${refNumber}`)\r\n    const listings = response.data?.data || []\r\n\r\n    console.log('Fetched from API:', listings)\r\n\r\n    // Return the first matching listing\r\n    return listings.length ? listings[0] : null\r\n  } catch (error) {\r\n    console.error('Error fetching property by ref:', error)\r\n    return null\r\n  }\r\n}\r\n// ðŸ§  Extract unique filter options from listings data\r\nexport function extractFilterOptions(listings) {\r\n  const categories = new Set()\r\n  const locations = new Set()\r\n  const bedrooms = new Set()\r\n\r\n  listings.forEach((item) => {\r\n    if (item.category) categories.add(item.category)\r\n    if (item.location?.full_path) locations.add(item.location.full_path)\r\n    if (item.bed?.name) bedrooms.add(item.bed.name)\r\n  })\r\n\r\n  return {\r\n    categories: ['Any', ...categories],\r\n    locations: ['Any', ...locations],\r\n    bedrooms: ['Any', ...bedrooms],\r\n  }\r\n}\r\n// export async function getFilterOptions() {\r\n//   try {\r\n//     // If your API has endpoints like /filters or /meta-data, use it here.\r\n//     const response = await axios.get(`${BASE_URL}/filters`)\r\n//     return response.data\r\n//   } catch (error) {\r\n//     console.error('Error fetching filter options:', error)\r\n//     return {}\r\n//   }\r\n// }\r\n\r\n// ~/services/listingsService.js\r\nexport async function getCoordinatedListings() {\r\n  try {\r\n    const response = await fetch(\r\n      'https://elist.solz.cloud/backend/api/external/external-listings?page=1&itemsPerPage=20&sortBy=&orderBy=&searchTerm='\r\n    )\r\n    const result = await response.json()\r\n\r\n    if (result.status === 200 && Array.isArray(result.data)) {\r\n      // âœ… Normalize the listings to include lat/lng at top level\r\n      return result.data.map((item) => ({\r\n        ...item,\r\n        latitude: parseFloat(item.location?.latitude),\r\n        longitude: parseFloat(item.location?.longitude),\r\n      }))\r\n    } else {\r\n      console.error('Invalid API response:', result)\r\n      return []\r\n    }\r\n  } catch (error) {\r\n    console.error('Error fetching listings:', error)\r\n    return []\r\n  }\r\n}\r\n"],"version":3}